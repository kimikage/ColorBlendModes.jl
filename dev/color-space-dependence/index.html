<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Color Space Dependence · ColorBlendModes</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script><link href="../assets/mix.css" rel="stylesheet" type="text/css"/><link href="../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.svg" alt="ColorBlendModes logo"/></a><div class="docs-package-name"><span class="docs-autofit">ColorBlendModes</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Introduction</a></li><li><a class="tocitem" href="../blending-and-compositing/">Blending and Compositing</a></li><li><a class="tocitem" href="../blend-modes/">Blend Modes</a></li><li><a class="tocitem" href="../composite-operations/">Composite Operations</a></li><li class="is-active"><a class="tocitem" href>Color Space Dependence</a><ul class="internal"><li><a class="tocitem" href="#Supported-blend-modes"><span>Supported blend modes</span></a></li><li><a class="tocitem" href="#Hue-interpolation"><span>Hue interpolation</span></a></li><li><a class="tocitem" href="#Gamma-correction"><span>Gamma correction</span></a></li></ul></li><li><a class="tocitem" href="../utility-functions/">Utility Functions</a></li><li><a class="tocitem" href="../function-index/">Index</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Color Space Dependence</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Color Space Dependence</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/kimikage/ColorBlendModes.jl/blob/master/docs/src/color-space-dependence.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Color-Space-Dependence"><a class="docs-heading-anchor" href="#Color-Space-Dependence">Color Space Dependence</a><a id="Color-Space-Dependence-1"></a><a class="docs-heading-anchor-permalink" href="#Color-Space-Dependence" title="Permalink"></a></h1><h2 id="Supported-blend-modes"><a class="docs-heading-anchor" href="#Supported-blend-modes">Supported blend modes</a><a id="Supported-blend-modes-1"></a><a class="docs-heading-anchor-permalink" href="#Supported-blend-modes" title="Permalink"></a></h2><p>The behavior of blending depend on the color space (or color model), though the default behavior follows the W3C&#39;s definition.</p><p>The following table shows the blend modes and their definitions supported by each color type.</p><table><tr><th style="text-align: right">blend mode</th><th style="text-align: left"><code>Gray</code></th><th style="text-align: left"><code>RGB</code></th><th style="text-align: left"><code>Lab</code>/<code>Luv</code></th><th style="text-align: left"><code>HSV</code>/<code>HSL</code>/<code>HSI</code></th></tr><tr><td style="text-align: right"><a href="../blend-modes/#normal">normal</a></td><td style="text-align: left">W3C</td><td style="text-align: left">W3C</td><td style="text-align: left">W3C</td><td style="text-align: left">W3C</td></tr><tr><td style="text-align: right"><a href="../blend-modes/#multiply">multiply</a></td><td style="text-align: left">W3C</td><td style="text-align: left">W3C</td><td style="text-align: left">PS-Lab</td><td style="text-align: left"></td></tr><tr><td style="text-align: right"><a href="../blend-modes/#screen">screen</a></td><td style="text-align: left">W3C</td><td style="text-align: left">W3C</td><td style="text-align: left">PS-Lab</td><td style="text-align: left"></td></tr><tr><td style="text-align: right"><a href="../blend-modes/#overlay">overlay</a></td><td style="text-align: left">W3C</td><td style="text-align: left">W3C</td><td style="text-align: left">PS-Lab</td><td style="text-align: left"></td></tr><tr><td style="text-align: right"><a href="../blend-modes/#darken">darken</a></td><td style="text-align: left">W3C</td><td style="text-align: left">W3C</td><td style="text-align: left"></td><td style="text-align: left"></td></tr><tr><td style="text-align: right"><a href="../blend-modes/#lighten">lighten</a></td><td style="text-align: left">W3C</td><td style="text-align: left">W3C</td><td style="text-align: left"></td><td style="text-align: left"></td></tr><tr><td style="text-align: right"><a href="../blend-modes/#color-dodge">color-dodge</a></td><td style="text-align: left">W3C</td><td style="text-align: left">W3C</td><td style="text-align: left"></td><td style="text-align: left"></td></tr><tr><td style="text-align: right"><a href="../blend-modes/#color-burn">color-burn</a></td><td style="text-align: left">W3C</td><td style="text-align: left">W3C</td><td style="text-align: left"></td><td style="text-align: left"></td></tr><tr><td style="text-align: right"><a href="../blend-modes/#hard-light">hard-light</a></td><td style="text-align: left">W3C</td><td style="text-align: left">W3C</td><td style="text-align: left">PS-Lab</td><td style="text-align: left"></td></tr><tr><td style="text-align: right"><a href="../blend-modes/#soft-light">soft-light</a></td><td style="text-align: left">W3C</td><td style="text-align: left">W3C</td><td style="text-align: left">PS-Lab</td><td style="text-align: left"></td></tr><tr><td style="text-align: right"><a href="../blend-modes/#difference">difference</a></td><td style="text-align: left">W3C</td><td style="text-align: left">W3C</td><td style="text-align: left"></td><td style="text-align: left"></td></tr><tr><td style="text-align: right"><a href="../blend-modes/#exclusion">exclusion</a></td><td style="text-align: left">W3C</td><td style="text-align: left">W3C</td><td style="text-align: left"></td><td style="text-align: left"></td></tr><tr><td style="text-align: right"><a href="../blend-modes/#hue">hue</a></td><td style="text-align: left"></td><td style="text-align: left">W3C</td><td style="text-align: left">PS-Lab</td><td style="text-align: left">HSx</td></tr><tr><td style="text-align: right"><a href="../blend-modes/#saturation">saturation</a></td><td style="text-align: left"></td><td style="text-align: left">W3C</td><td style="text-align: left">PS-Lab</td><td style="text-align: left">HSx</td></tr><tr><td style="text-align: right"><a href="../blend-modes/#color">color</a></td><td style="text-align: left"></td><td style="text-align: left">W3C</td><td style="text-align: left">PS-Lab</td><td style="text-align: left">HSx</td></tr><tr><td style="text-align: right"><a href="../blend-modes/#luminosity">luminosity</a></td><td style="text-align: left"></td><td style="text-align: left">W3C</td><td style="text-align: left">PS-Lab</td><td style="text-align: left">HSx</td></tr></table><p>The abbreviations in the table mean the definitions of the blending used:</p><ul><li>W3C:<ul><li><a href="https://drafts.fxtf.org/compositing-1/">Compositing and Blending Level 1</a></li></ul></li><li>PS-Lab:<ul><li>the Lab color mode of Adobe Photoshop</li></ul></li><li>HSx:<ul><li>Hue-Saturation-{Value/Lightness/Intensity} as Hue-Saturation-&quot;Luminosity&quot;</li></ul></li></ul><p>The color types not shown above and the modes with blank are not officially supported. Note that even unsupported modes do not explicitly raise errors. For example, <code>XYZ</code> type is calculated in the same way as <code>RGB</code> type, but since <code>XYZ</code> values can be greater than <code>1</code>, and the <a href="../blending-and-compositing/#ColorBlendModes.blend"><code>blend</code></a> function does not clip the input colors, the validity of the results is not guaranteed.</p><h2 id="Hue-interpolation"><a class="docs-heading-anchor" href="#Hue-interpolation">Hue interpolation</a><a id="Hue-interpolation-1"></a><a class="docs-heading-anchor-permalink" href="#Hue-interpolation" title="Permalink"></a></h2><p>There are two ways to interpolate the two angles: clockwise and counterclockwise. For the hue interpolation, ColorBlendModes uses the way with the smaller angle between the two hues. Therefore, <code>HSV</code>, <code>HSL</code> and <code>HSI</code> colors do not have the associative property even in the simple alpha compositing (i.e. using <a href="../blend-modes/#normal"><code>BlendNormal</code></a> and <a href="../composite-operations/#source-over"><code>CompositeSourceOver</code></a>).</p><pre><code class="language-julia-repl">julia&gt; blend(HSV(30, 0.5, 0.5), HSV(350, 0.5, 0.5), opacity=0.5) # hue != 190
HSV{Float64}(10.0,0.5,0.5)

julia&gt; c1, c2, c3 = HSL(0, 1, .8), HSLA(120, 1, .8, .5), HSLA(240, 1, .8, .5);

julia&gt; blend(blend(c1, c2), c3)
HSL{Float64}(150.0,1.0,0.8)

julia&gt; blend(c1, blend(c2, c3))
HSL{Float64}(240.0,1.0,0.8)</code></pre><p>In addition, in the case of blending a gray, i.e., a color with zero saturation, and a non-gray, the hue of the non-gray color is used.</p><pre><code class="language-julia-repl">julia&gt; for w in 0.0:0.2:1.0 # gray to yellow green, not via brown
           println(blend(HSI(12.3, 0.0, 0.5), HSI(78.9, 1.0, 0.5), opacity=w))
       end
HSI{Float64}(78.9,0.0,0.5)
HSI{Float64}(78.9,0.2,0.5)
HSI{Float64}(78.9,0.4,0.5)
HSI{Float64}(78.9,0.6,0.5)
HSI{Float64}(78.9,0.8,0.5)
HSI{Float64}(78.9,1.0,0.5)</code></pre><h2 id="Gamma-correction"><a class="docs-heading-anchor" href="#Gamma-correction">Gamma correction</a><a id="Gamma-correction-1"></a><a class="docs-heading-anchor-permalink" href="#Gamma-correction" title="Permalink"></a></h2><p>The <a href="../blending-and-compositing/#ColorBlendModes.blend"><code>blend</code></a> function blends colors in a &quot;uniform&quot; space. Note that this does not mean it blends in the linear RGB space. In other words, the <a href="../blending-and-compositing/#ColorBlendModes.blend"><code>blend</code></a> function does not care about the gamma.</p><p>If you want to blend RGB colors in the linear RGB space and to use the sRGB input/output, you should manually correct the gamma as follows:</p><pre><code class="language-julia">using ColorTypes, ColorBlendModes
image_green = load(&quot;green.png&quot;) # in sRGB space
image_blue  = load(&quot;blue.png&quot;) # in sRGB space

# Note that the following are not the exact sRGB gamma calculations.
to_linear(c::TransparentRGB) =
    typeof(c)(red(c)^2.2, green(c)^2.2, blue(c)^2.2, alpha(c))
to_srgb(c::TransparentRGB) =
    typeof(c)(red(c)^0.4545, green(c)^0.4545, blue(c)^0.4545, alpha(c))

blend_linear(c1, c2; mode=BlendNormal) =
    to_srgb(blend(to_linear(c1), to_linear(c2), mode=mode))

out_srgb   = blend.(image_blue, image_green, mode=BlendScreen) # the result is in sRGB
out = blend_linear.(image_blue, image_green, mode=BlendScreen) # the result is in sRGB</code></pre><table><tr><th style="text-align: center">space</th><th style="text-align: center">Result</th><th style="text-align: center">SVG</th></tr><tr><td style="text-align: center">sRGB</td><td style="text-align: center"><img src="../assets/srgb.png" alt="sRGB"/></td><td style="text-align: center"><img src="../assets/srgb.svg" alt="sRGB svg"/></td></tr><tr><td style="text-align: center">linear RGB</td><td style="text-align: center"><img src="../assets/linear-rgb.png" alt="linearRGB"/></td><td style="text-align: center"><img src="../assets/linear-rgb.svg" alt="linearRGB svg"/></td></tr></table><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>Some graphics software also applies the gamma correction to alpha channels as grayscale images.</p></div></div></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../composite-operations/">« Composite Operations</a><a class="docs-footer-nextpage" href="../utility-functions/">Utility Functions »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Wednesday 11 November 2020 11:46">Wednesday 11 November 2020</span>. Using Julia version 1.5.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
